<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- users edit start -->
    <section class="app-user-edit">
      <div class="card">
        <div class="card-body">
          <ul ngbNav #nav="ngbNav" class="nav nav-pills">
            <li ngbNavItem>
              <a ngbNavLink class="d-flex align-items-center"
                ><i data-feather="user" class="mr-sm-50"></i><span class="d-none d-sm-block">{{ 'HEADER.EDITROLEPERMISSIONS' | translate }}</span></a
              >
              <ng-template ngbNavContent>
                <!-- Account Tab starts -->
                <div class="tab-pane active" id="account" aria-labelledby="account-tab" role="tabpanel">
                  <form class="form-validate" (ngSubmit)="(newUserForm.form.valid)" #newUserForm="ngForm">
                  <!-- role name -->
                  <div class="row mt-1">
                      
                          <h4 class="mb-1 name">
                            <i data-feather="user" [size]="16" class="mr-75 font-medium-4"></i>
                            <span class="align-middle">{{ 'HEADER.ROLENAME' | translate }} :  </span>
                          </h4>
                          <div class="col-md-3">
                            <div class="form-group">
                              <input
                                type="text"
                                class="form-control dt-full-name"
                                id="basic-icon-default-fullname"
                                placeholder="{{ 'HEADER.PLACEHOLDER' | translate }}"
                                name="roleName"
                                [(ngModel)]="rolePermissionData.rolesDetails.name"
                                [class.error]="newUserForm.submitted && roleName.invalid"
                                #roleName="ngModel"
                                minlength="5"
                                maxlength="20"
                                required
                                aria-label="Ex. Manager"
                                aria-describedby="basic-icon-default-fullname2"
                              />
                              <span *ngIf="newUserForm.submitted && roleName.invalid" class="invalid-form">
                                <small class="form-text text-danger" *ngIf="roleName.errors.required">{{ 'HEADER.ROLENAMERQUIRED' | translate }}</small>
                                <small class="form-text text-danger" *ngIf="roleName.errors.maxlength">{{ 'HEADER.ROLENAMEMAX' | translate }}</small>
                                <small class="form-text text-danger" *ngIf="roleName.errors.minlength">{{ 'HEADER.ROLENAMEMINL' | translate }}</small>
                              </span>
                            </div>  
                        </div>
                  </div>
              <!-- permission table -->
              <div  >
                  <div class="table-responsive border rounded mt-1"  >
                    <h6 class="py-1 mx-1 mb-0 font-medium-2">
                      <i data-feather="lock" [size]="20" class="mr-25"></i>
                      <span class="align-middle">{{ 'HEADER.PERMISSION' | translate }}</span>
                    </h6>
                    <table class="table table-striped table-borderless">
                      <thead class="thead-light">
                        <tr>
                          <th>{{ 'HEADER.MODULE' | translate }}</th>
                          <th>{{ 'HEADER.VIEW' | translate }}</th>
                          <th>{{ 'HEADER.ADD' | translate }}</th>
                          <th>{{ 'HEADER.EDIT' | translate }}</th>
                          <th>{{ 'HEADER.DELETE' | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of rolePermissionData.rolesDetails.permissions; index as i;">
                          <td >{{item.Permission?.name}}</td>
                          <td >
                            <div  class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input"  id="{{item.permissionId }}_view"  
                              [checked]="item.view"  
                              (change)="rolePermissionData.rolesDetails.permissions[i].view = !rolePermissionData.rolesDetails.permissions[i].view"
                              />
                              <label class="custom-control-label" for="{{item.permissionId}}_view"></label>
                            </div>
                          </td>
                          <td>
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="{{item.permissionId}}_add"
                              (change)="rolePermissionData.rolesDetails.permissions[i].add = !rolePermissionData.rolesDetails.permissions[i].add"
                              [checked]="item.add" />
                              <label class="custom-control-label" for="{{item.permissionId}}_add"></label>
                            </div>
                          </td>
                          <td>
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="{{item.permissionId}}_edit"
                              (change)="rolePermissionData.rolesDetails.permissions[i].edit = !rolePermissionData.rolesDetails.permissions[i].edit"
                              [checked]="item.edit" />
                              <label class="custom-control-label" for="{{item.permissionId}}_edit"></label>
                            </div>
                          </td>
                          <td>
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input"  id="{{item.permissionId}}_delete"
                              (change)="rolePermissionData.rolesDetails.permissions[i].delete = !rolePermissionData.rolesDetails.permissions[i].delete"
                              [checked]="item.delete"  />
                              <label class="custom-control-label"   for="{{item.permissionId}}_delete"></label>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  
                </div>
               
               <!-- table end -->
               
               <!-- buttons -->
               <!-- submit button -->
               <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                <button
                  type="submit"
                  (click)="submit()"
                  class="btn btn-primary mb-1 mb-sm-0 mr-0 mr-sm-1"
                  rippleEffect
                >
                {{ 'HEADER.SAVECHANGES' | translate }}
                </button>
                <button (click)="cancel()" class="btn btn-outline-secondary" rippleEffect>
                  {{ 'HEADER.CANCEL' | translate }}
                </button>
              </div>
               <!-- /buttons -->
                  </form>
                  <!-- users edit account form ends -->
                </div>
                <!-- Account Tab ends -->
              </ng-template>
          </ul>
          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </div>
      </div>
    </section>
    <!-- users edit ends -->
  </div>
</div>
